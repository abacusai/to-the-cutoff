[
    {
        "name": "Coins Exhibition",
        "description": "Arkady and Kirill visited an exhibition of rare coins. The coins were located\nin a row and enumerated from left to right from 1 to k, each coin either was\nlaid with its obverse (front) side up, or with its reverse (back) side up.\nArkady and Kirill made some photos of the coins, each photo contained a\nsegment of neighboring coins. Akrady is interested in obverses, so on each\nphoto made by him there is at least one coin with obverse side up. On the\ncontrary, Kirill is interested in reverses, so on each photo made by him there\nis at least one coin with its reverse side up. The photos are lost now, but\nArkady and Kirill still remember the bounds of the segments of coins each\nphoto contained. Given this information, compute the remainder of division by\n10^9 + 7 of the number of ways to choose the upper side of each coin in such a\nway, that on each Arkady's photo there is at least one coin with obverse side\nup, and on each Kirill's photo there is at least one coin with reverse side\nup. Input The first line contains three integers k, n and m (1 \u2264 k \u2264 10^9, 0 \u2264\nn, m \u2264 10^5) \u2014 the total number of coins, the number of photos made by Arkady,\nand the number of photos made by Kirill, respectively. The next n lines\ncontain the descriptions of Arkady's photos, one per line. Each of these lines\ncontains two integers l and r (1 \u2264 l \u2264 r \u2264 k), meaning that among coins from\nthe l-th to the r-th there should be at least one with obverse side up. The\nnext m lines contain the descriptions of Kirill's photos, one per line. Each\nof these lines contains two integers l and r (1 \u2264 l \u2264 r \u2264 k), meaning that\namong coins from the l-th to the r-th there should be at least one with\nreverse side up. Output Print the only line \u2014 the number of ways to choose the\nside for each coin modulo 10^9 + 7 = 1000000007. Examples Input 5 2 2 1 3 3 5\n2 2 4 5 Output 8 Input 5 3 2 1 3 2 2 3 5 2 2 4 5 Output 0 Input 60 5 7 1 3 50\n60 1 60 30 45 20 40 4 5 6 37 5 18 50 55 22 27 25 31 44 45 Output 732658600\nNote In the first example the following ways are possible ('O' \u2014 obverse, 'R'\n\u2014 reverse side): OROOR, ORORO, ORORR, RROOR, RRORO, RRORR, ORROR, ORRRO. In\nthe second example the information is contradictory: the second coin should\nhave obverse and reverse sides up at the same time, that is impossible. So,\nthe answer is 0.\n\n",
        "cf_contest_id": 930,
        "cf_index": "E",
        "cf_rating": 2900,
        "difficulty": 0,
        "cf_tags": [
            "data structures",
            "dp",
            "math"
        ],
        "time_limit_seconds": 2.0,
        "memory_limit_bytes": 256.0,
        "public_cases": [
            [
                "5 2 2\r\n1 3\r\n3 5\r\n2 2\r\n4 5\r\n",
                "8\r\n"
            ],
            [
                "5 3 2\r\n1 3\r\n2 2\r\n3 5\r\n2 2\r\n4 5\r\n",
                "0\r\n"
            ],
            [
                "60 5 7\r\n1 3\r\n50 60\r\n1 60\r\n30 45\r\n20 40\r\n4 5\r\n6 37\r\n5 18\r\n50 55\r\n22 27\r\n25 31\r\n44 45\r\n",
                "732658600\r\n"
            ]
        ],
        "private_cases": [
            [
                "10 3 5\r\n2 2\r\n3 3\r\n6 8\r\n1 1\r\n1 2\r\n2 3\r\n4 6\r\n5 9\r\n",
                "0\r\n"
            ],
            [
                "10 0 0\r\n",
                "1024\r\n"
            ],
            [
                "100 5 8\r\n45 50\r\n57 70\r\n46 57\r\n66 72\r\n48 54\r\n75 89\r\n40 53\r\n3 8\r\n62 74\r\n6 14\r\n91 98\r\n81 87\r\n41 48\r\n",
                "350857787\r\n"
            ],
            [
                "100 14 10\r\n12 18\r\n31 39\r\n79 90\r\n66 74\r\n35 49\r\n84 94\r\n9 13\r\n86 92\r\n63 76\r\n88 92\r\n23 37\r\n60 70\r\n81 92\r\n70 75\r\n77 91\r\n2 6\r\n38 50\r\n28 37\r\n43 47\r\n76 89\r\n47 52\r\n49 55\r\n26 37\r\n61 67\r\n",
                "754180076\r\n"
            ],
            [
                "1000000000 0 0\r\n",
                "140625001\r\n"
            ],
            [
                "1 0 0\r\n",
                "2\r\n"
            ],
            [
                "1 0 1\r\n1 1\r\n",
                "1\r\n"
            ],
            [
                "2 0 0\r\n",
                "4\r\n"
            ],
            [
                "2 0 1\r\n1 2\r\n",
                "3\r\n"
            ],
            [
                "1000000000 1 0\r\n1 1000000000\r\n",
                "140625000\r\n"
            ],
            [
                "1000000000 1 0\r\n1000000000 1000000000\r\n",
                "570312504\r\n"
            ]
        ]
    }
]