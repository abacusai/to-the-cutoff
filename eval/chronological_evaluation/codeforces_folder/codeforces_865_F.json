[
    {
        "name": "Egg Roulette",
        "description": "The game of Egg Roulette is played between two players. Initially 2R raw eggs\nand 2C cooked eggs are placed randomly into a carton. The shells are left on\nso there is no way to distinguish a raw egg from a cooked egg. One at a time,\na player will select an egg, and then smash the egg on his/her forehead. If\nthe egg was cooked, not much happens, but if the egg was raw, it will make\nquite the mess. This continues until one player has broken R raw eggs, at\nwhich point that player is declared the loser and the other player wins. The\norder in which players take turns can be described as a string of 'A' and 'B'\ncharacters, where the i-th character tells which player should choose the i-th\negg. Traditionally, players take turns going one after the other. That is,\nthey follow the ordering \"ABABAB...\". This isn't very fair though, because the\nsecond player will win more often than the first. We'd like you to find a\nbetter ordering for the players to take their turns. Let's define the\nunfairness of an ordering as the absolute difference between the first\nplayer's win probability and the second player's win probability. We're\ninterested in orderings that minimize the unfairness. We only consider an\nordering valid if it contains the same number of 'A's as 'B's. You will also\nbe given a string S of length 2(R + C) containing only 'A', 'B', and '?'\ncharacters. An ordering is said to match S if it only differs from S in\npositions where S contains a '?'. Of the valid orderings that minimize\nunfairness, how many match S? Input The first line of input will contain\nintegers R and C (1 \u2264 R, C \u2264 20, R + C \u2264 30). The second line of input will\ncontain the string S of length 2(R + C) consisting only of characters 'A',\n'B', '?'. Output Print the number of valid orderings that minimize unfairness\nand match S. Examples Input 1 1 ??BB Output 0 Input 2 4 ?BA??B??A??? Output 1\nInput 4 14 ????A??BB?????????????AB???????????? Output 314 Note In the first\ntest case, the minimum unfairness is 0, and the orderings that achieve it are\n\"ABBA\" and \"BAAB\", neither of which match S. Note that an ordering such as\n\"ABBB\" would also have an unfairness of 0, but is invalid because it does not\ncontain the same number of 'A's as 'B's. In the second example, the only\nmatching ordering is \"BBAAABABABBA\".\n\n",
        "cf_contest_id": 865,
        "cf_index": "F",
        "cf_rating": 3300,
        "difficulty": 0,
        "cf_tags": [
            "bitmasks",
            "brute force",
            "divide and conquer",
            "math",
            "meet-in-the-middle"
        ],
        "time_limit_seconds": 3.0,
        "memory_limit_bytes": 256.0,
        "public_cases": [
            [
                "1 1\r\n??BB\r\n",
                "0"
            ],
            [
                "2 4\r\n?BA??B??A???\r\n",
                "1"
            ],
            [
                "4 14\r\n????A??BB?????????????AB????????????\r\n",
                "314"
            ]
        ],
        "private_cases": [
            [
                "10 10\r\nABABABAAABBBAAAAAAAAABAABBAABBBBBBBBBBBA\r\n",
                "1"
            ],
            [
                "14 11\r\n??????????????????????????????????????????????????\r\n",
                "7124934600"
            ],
            [
                "20 10\r\nAAAAAAAAAAAAAAAAAAAAAAAAAA??????????????????????????????????\r\n",
                "1540"
            ],
            [
                "1 20\r\n?AB??????BA????B???BA????????AAB??????????\r\n",
                "13118212"
            ],
            [
                "10 20\r\nA?A???A??B?A????B??B???????B???????????????A??B?????????????\r\n",
                "1716"
            ],
            [
                "20 10\r\n????????????????????????????????????????????????????????????\r\n",
                "23083695792960"
            ],
            [
                "16 14\r\n????????????????????????????????????????????????????????????\r\n",
                "459823234112"
            ],
            [
                "13 17\r\n????????????????????????????????????????????????????????????\r\n",
                "451585680"
            ],
            [
                "10 20\r\n????????????????????????????????????????????????????????????\r\n",
                "184756"
            ],
            [
                "5 3\r\n?BB?BBBBB?BBBBB?\r\n",
                "0"
            ],
            [
                "15 15\r\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\r\n",
                "0"
            ],
            [
                "10 20\r\n????????????A??????????????????????????????A??B??????A?A?B??\r\n",
                "48620"
            ],
            [
                "10 20\r\nA??????????BA?B?????????B???????????????????????????????????\r\n",
                "6435"
            ],
            [
                "1 20\r\n??????????????????????????????????????????\r\n",
                "10685501398"
            ],
            [
                "2 3\r\nABBAABBAAB\r\n",
                "0"
            ],
            [
                "11 19\r\n???A??????B?????????B???????????????????????????????A???????\r\n",
                "293930"
            ],
            [
                "12 18\r\n???A??B???B???????????A?????????????????????????????????????\r\n",
                "13813800"
            ],
            [
                "13 17\r\n????????????ABBBBBBBBBBBBBBBBBBB????????????????????????????\r\n",
                "12"
            ],
            [
                "20 1\r\n??????????????????????????????????????????\r\n",
                "137846528820"
            ],
            [
                "20 1\r\n????????????????????????????????????????BB\r\n",
                "0"
            ],
            [
                "20 1\r\nAAAAAAAAAAAAAAAAAAAA??????????????????????\r\n",
                "1"
            ],
            [
                "7 9\r\nBBBBBBAAAAABBBAAAAAAAABBBBAABBBA\r\n",
                "1"
            ],
            [
                "14 16\r\n??????????????????????????AA????????????????????????????????\r\n",
                "2911594896"
            ],
            [
                "16 14\r\n??????????????????????????????????????????????????????????AA\r\n",
                "0"
            ],
            [
                "10 20\r\nBBAA?AAABBAAAABABBBBBBBBA?BB?AAA?A?AAAA???BABBBBA?B?AAAAABAB\r\n",
                "1"
            ],
            [
                "10 20\r\n?B?BBAAABA?B?AA?BB?????ABAAAABB?ABBBBBBAA???A??AB?ABB?B?BA?A\r\n",
                "20"
            ],
            [
                "10 20\r\n?AABBA??AA????BB?A?????B??B??AA?????AAA?B??AB?B?A?B?AA?AABAB\r\n",
                "126"
            ],
            [
                "20 10\r\n???????????????????????????????????????????????????????????B\r\n",
                "11541847896480"
            ],
            [
                "19 11\r\n???????????????????A????????????????????????????????????????\r\n",
                "4568648125690"
            ],
            [
                "18 12\r\n???????????????????????????A????????????????????????????????\r\n",
                "1749695026860"
            ],
            [
                "17 13\r\n????A?B?????????????????????????????????????????????????????\r\n",
                "303065313392"
            ],
            [
                "16 14\r\n????????????????????????????????????????B????????????A??????\r\n",
                "151532656696"
            ],
            [
                "15 15\r\n????????????????????AA?????????????????????????????????????B\r\n",
                "7898654920"
            ],
            [
                "14 16\r\n???????????????AA????????????????????????????????B??????????\r\n",
                "2310789600"
            ],
            [
                "13 17\r\n??????????????????A????B????????????????????A???????????????\r\n",
                "54627300"
            ],
            [
                "12 18\r\n???????????????AA???????????????????????????????????????????\r\n",
                "68934450"
            ],
            [
                "11 19\r\n???????????????????A?????????????????A????????????A?????????\r\n",
                "0"
            ],
            [
                "11 19\r\n???????????????????A?????????????????A????????????B?????????\r\n",
                "817190"
            ],
            [
                "10 20\r\n??????????????????????????????????????????????????????????BA\r\n",
                "92378"
            ],
            [
                "10 20\r\nBBBBBBBBBB??????????????????????????????????????????????????\r\n",
                "1"
            ],
            [
                "20 10\r\nA??B??A???B???A??B?????????????????B?A??????????????????????\r\n",
                "80450690112"
            ],
            [
                "20 10\r\n??????????????????????????????????????????????????BBBBBBBBBB\r\n",
                "0"
            ],
            [
                "20 10\r\nAAAAAAAAAAA????????????????????????????????????????????????A\r\n",
                "17672631900"
            ],
            [
                "5 5\r\nBB????B?????????B???\r\n",
                "10"
            ],
            [
                "4 6\r\nBB???A??????A???????\r\n",
                "21"
            ],
            [
                "6 4\r\nA??????????BAB?????B\r\n",
                "120"
            ],
            [
                "3 7\r\nAB??AA??B?????A?????\r\n",
                "1"
            ],
            [
                "7 3\r\nB???AAABB?B???BA?A?B\r\n",
                "35"
            ],
            [
                "2 8\r\n??A???AB?AB?A??BBA?B\r\n",
                "1"
            ]
        ]
    }
]