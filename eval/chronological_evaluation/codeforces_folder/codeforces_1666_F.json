[
    {
        "name": "Fancy Stack",
        "description": "Little Fiona has a collection of \n    n\n blocks of various sizes \n    a_1, a_2,\n    \n    \u2026, a_n\n, where \n    n\n is even. Some of the blocks can be equal in\nsize. She would like to put all these blocks one onto another to form a fancy\nstack. Let \n    b_1, b_2, \n    \u2026, b_n\n be the sizes of blocks in the stack\nfrom top to bottom. Since Fiona is using all her blocks, \n    b_1, b_2,\n    \n    \u2026, b_n\n must be a permutation of \n    a_1, a_2, \n    \u2026, a_n\n. Fiona\nthinks the stack is fancy if both of the following conditions are satisfied:\nThe second block is strictly bigger than the first one, and then each block is\nalternately strictly smaller or strictly bigger than the previous one.\nFormally, \n    b_1 < b_2 > b_3 < b_4 > \n    \u2026 > b_n-1 < b_n\n. The sizes of\nthe blocks on even positions are strictly increasing. Formally, \n    b_2 < b_4 <\n    b_6 < \n    \u2026 < b_n\n (remember that \n    n\n is even). Two stacks are\nconsidered different if their corresponding sequences \n    b_1, b_2, \n    \u2026,\n    b_n\n differ in at least one position. Fiona wants to know how many different\nfancy stacks she can build with all of her blocks. Since large numbers scare\nFiona, find this number modulo \n    998\n     244\n     353\n. Input Each input\ncontains multiple test cases. The first line contains the number of test cases\n\n    t\n (\n    1 \n    \u2264 t \n    \u2264 2500\n). Description of the test cases follows.\nThe first line of each test case contains a single integer \n    n\n \u2014 the\nnumber of blocks at Fiona's disposal (\n    2 \n    \u2264 n \n    \u2264 5000\n; \n    n\n is\neven). The second line contains \n    n\n integers \n    a_1, a_2, \n    \u2026, a_n\n\n\u2014 the sizes of the blocks in non-decreasing order (\n    1 \n    \u2264 a_1 \n    \u2264 a_2\n    \n    \u2264\n    \u2026\n    \u2264 a_n \n    \u2264 n\n). It is guaranteed that the sum of \n    n\n\nover all test cases does not exceed \n    5000\n. Output For each test case,\nprint the number of ways to build a fancy stack, modulo\n\n    998\n     244\n     353\n. Example Input 2 4 1 2 3 4 8 1 1 2 3 4 4 6 7 Output 2\n4\n\n",
        "cf_contest_id": 1666,
        "cf_index": "F",
        "cf_rating": 2200,
        "difficulty": 0,
        "cf_tags": [
            "combinatorics",
            "dp",
            "implementation"
        ],
        "time_limit_seconds": 3.0,
        "memory_limit_bytes": 512.0,
        "public_cases": [
            [
                "2\r\n4\r\n1 2 3 4\r\n8\r\n1 1 2 3 4 4 6 7\r\n",
                "2\r\n4\r\n"
            ]
        ],
        "private_cases": []
    }
]