[
    {
        "name": "Not Splitting",
        "description": "There is a \n    k \n    \u00d7 k\n grid, where \n    k\n is even. The square in row\n\n    r\n and column \n    c\n is denoted by \n    (r,c)\n. Two squares \n    (r_1,\n    c_1)\n and \n    (r_2, c_2)\n are considered adjacent if \n    | r_1 - r_2\n    \n    | + \n    | c_1 - c_2 \n    | = 1\n. An array of adjacent pairs of\nsquares is called strong if it is possible to cut the grid along grid lines\ninto two connected, congruent pieces so that each pair is part of the same\npiece. Two pieces are congruent if one can be matched with the other by\ntranslation, rotation, and reflection, or a combination of these. The picture\nabove represents the first test case. Arrows indicate pairs of squares, and\nthe thick black line represents the cut. You are given an array \n    a\n of\n\n    n\n pairs of adjacent squares. Find the size of the largest strong\nsubsequence of \n    a\n. An array \n    p\n is a subsequence of an array \n    q\n\nif \n    p\n can be obtained from \n    q\n by deletion of several (possibly, zero\nor all) elements. Input The input consists of multiple test cases. The first\nline contains an integer \n    t\n (\n    1 \n    \u2264 t \n    \u2264 100\n) \u2014 the number of\ntest cases. The description of the test cases follows. The first line of each\ntest case contains two space-separated integers \n    n\n and \n    k\n (\n    1\n    \n    \u2264 n \n    \u2264 10^5\n; \n    2 \n    \u2264 k \n    \u2264 500\n, \n    k\n is even) \u2014 the\nlength of \n    a\n and the size of the grid, respectively. Then \n    n\n lines\nfollow. The \n    i\n-th of these lines contains four space-separated integers\n\n    r_i,1\n, \n    c_i,1\n, \n    r_i,2\n, and \n    c_i,2\n (\n    1 \n    \u2264\n    r_i,1, c_i,1, r_i,2, c_i,2\n    \u2264 k\n) \u2014 the \n    i\n-th element of\n\n    a\n, represented by the row and column of the first square \n    (r_i,1,\n    c_i,1)\n and the row and column of the second square \n    (r_i,2,\n    c_i,2)\n. These squares are adjacent. It is guaranteed that the sum of\n\n    n\n over all test cases does not exceed \n    10^5\n, and the sum of \n    k\n\nover all test cases does not exceed \n    500\n. Output For each test case,\noutput a single integer \u2014 the size of the largest strong subsequence of\n\n    a\n. Example Input 3 8 4 1 2 1 3 2 2 2 3 3 2 3 3 4 2 4 3 1 4 2 4 2 1 3 1 2\n2 3 2 4 1 4 2 7 2 1 1 1 2 2 1 2 2 1 1 1 2 1 1 2 1 1 2 2 2 1 1 2 1 1 2 2 2 1 6\n3 3 3 4 Output 7 4 1 Note In the first test case, the array \n    a\n is not\ngood, but if we take the subsequence \n    [a_1, a_2, a_3, a_4, a_5, a_6,\n    a_8]\n, then the square can be split as shown in the statement. In the second\ntest case, we can take the subsequence consisting of the last four elements of\n\n    a\n and cut the square with a horizontal line through its center.\n\n",
        "cf_contest_id": 1627,
        "cf_index": "F",
        "cf_rating": 2700,
        "difficulty": 0,
        "cf_tags": [
            "geometry",
            "graphs",
            "greedy",
            "implementation",
            "shortest paths"
        ],
        "time_limit_seconds": 3.0,
        "memory_limit_bytes": 512.0,
        "public_cases": [
            [
                "3\r\n8 4\r\n1 2 1 3\r\n2 2 2 3\r\n3 2 3 3\r\n4 2 4 3\r\n1 4 2 4\r\n2 1 3 1\r\n2 2 3 2\r\n4 1 4 2\r\n7 2\r\n1 1 1 2\r\n2 1 2 2\r\n1 1 1 2\r\n1 1 2 1\r\n1 2 2 2\r\n1 1 2 1\r\n1 2 2 2\r\n1 6\r\n3 3 3 4\r\n",
                "7\r\n4\r\n1\r\n"
            ]
        ],
        "private_cases": []
    }
]