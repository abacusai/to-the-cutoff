[
    {
        "name": "Tokitsukaze and Beautiful Subsegments",
        "description": "Tokitsukaze has a permutation \n    p\n of length \n    n\n. Let's call a segment\n\n    [l,r]\n beautiful if there exist \n    i\n and \n    j\n satisfying \n    p_i\n    \n    \u00b7 p_j = \n    max\n    \n    p_l, p_l+1, \n    \u2026, p_r\n, where \n    l\n    \n    \u2264 i < j \n    \u2264 r\n. Now Tokitsukaze has \n    q\n queries, in the\n\n    i\n-th query she wants to know how many beautiful subsegments \n    [x,y]\n\nthere are in the segment \n    [l_i,r_i]\n (i. e. \n    l_i \n    \u2264 x \n    \u2264 y\n    \n    \u2264 r_i\n). Input The first line contains two integers \n    n\n and \n    q\n\n(\n    1\n    \u2264 n \n    \u2264 2 \n    \u00b7 10^5\n; \n    1 \n    \u2264 q \n    \u2264 10^6\n) \u2014 the\nlength of permutation \n    p\n and the number of queries. The second line\ncontains \n    n\n distinct integers \n    p_1, p_2, \n    \u2026, p_n\n (\n    1 \n    \u2264\n    p_i \n    \u2264 n\n) \u2014 the permutation \n    p\n. Each of the next \n    q\n lines\ncontains two integers \n    l_i\n and \n    r_i\n (\n    1 \n    \u2264 l_i \n    \u2264 r_i\n    \n    \u2264 n\n) \u2014 the segment \n    [l_i,r_i]\n of this query. Output For each\nquery, print one integer \u2014 the numbers of beautiful subsegments in the segment\n\n    [l_i,r_i]\n. Examples Input 8 3 1 3 5 2 4 7 6 8 1 3 1 1 1 8 Output 2 0 10\nInput 10 10 6 1 3 2 5 8 4 10 7 9 1 8 1 10 1 2 1 4 2 4 5 8 4 10 4 7 8 10 5 9\nOutput 17 25 1 5 2 0 4 1 0 0 Note In the first example, for the first query,\nthere are \n    2\n beautiful subsegments \u2014 \n    [1,2]\n and \n    [1,3]\n.\n\n",
        "cf_contest_id": 1677,
        "cf_index": "E",
        "cf_rating": 2900,
        "difficulty": 0,
        "cf_tags": [
            "data structures"
        ],
        "time_limit_seconds": 4.0,
        "memory_limit_bytes": 1024.0,
        "public_cases": [
            [
                "8 3\r\n1 3 5 2 4 7 6 8\r\n1 3\r\n1 1\r\n1 8\r\n",
                "2\r\n0\r\n10\r\n"
            ],
            [
                "10 10\r\n6 1 3 2 5 8 4 10 7 9\r\n1 8\r\n1 10\r\n1 2\r\n1 4\r\n2 4\r\n5 8\r\n4 10\r\n4 7\r\n8 10\r\n5 9\r\n",
                "17\r\n25\r\n1\r\n5\r\n2\r\n0\r\n4\r\n1\r\n0\r\n0\r\n"
            ]
        ],
        "private_cases": [
            [
                "1 1\r\n1\r\n1 1\r\n",
                "0\r\n"
            ]
        ]
    }
]