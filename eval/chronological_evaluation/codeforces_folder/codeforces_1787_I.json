[
    {
        "name": "Treasure Hunt",
        "description": "Define the beauty value of a sequence \n    b_1,b_2,\n    \u2026,b_c\n as the\nmaximum value of \n    \u2211\n    _i=1^qb_i +\n    \n    \u2211\n    _i=s^tb_i\n, where \n    q\n, \n    s\n, \n    t\n are all\nintegers and \n    s > q\n or \n    t\n    \u2264 q\n. Note that \n    b_i = 0\n when\n\n    i<1\n or \n    i>c\n, \n    \u2211\n    _i=s^tb_i = 0\n when \n    s>t\n.\nFor example, when \n    b = [-1,-2,-3]\n, we may have \n    q = 0\n, \n    s = 3\n,\n\n    t = 2\n so the beauty value is \n    0 + 0 = 0\n. And when \n    b =\n    [-1,2,-3]\n, we have \n    q = s = t = 2\n so the beauty value is \n    1 + 2 =\n    3\n. You are given a sequence \n    a\n of length \n    n\n, determine the sum of\nthe beauty value of all non-empty subsegments \n    a_l,a_l+1,\n    \u2026,a_r\n\n(\n    1\n    \u2264 l\n    \u2264 r\n    \u2264 n\n) of the sequence \n    a\n. Print the answer\nmodulo \n    998\n     244\n     353\n. Input Each test contains multiple test cases.\nThe first line contains an integer \n    T\n (\n    1 \n    \u2264 T \n    \u2264 10^4\n) \u2014 the\nnumber of test cases. The first line contains an integer \n    n\n (\n    1\n    \u2264\n    n\n    \u2264 10^6\n) \u2014 the length of \n    a\n. The second line contains \n    n\n\nintegers \n    a_1,a_2,\n    \u2026,a_n\n (\n    -10^6 \n    \u2264 a_i \n    \u2264 10^6\n) \u2014 the\ngiven sequence. It's guaranteed that the sum of \n    n\n does not exceed\n\n    10^6\n. Output For each test case, print a line containing a single\ninteger \u2014 the answer modulo \n    998\n     244\n     353\n. Example Input 4 7 80 59\n100 -52 -86 -62 75 8 -48 -14 -26 43 -41 34 13 55 1 74 20 56 -60 62 13 88 -48\n64 36 -10 19 94 25 -69 88 87 79 -70 74 -26 59 Output 5924 2548 148 98887 Note\nIn the second test case, for the subsequence \n    [-26,43,-41,34,13]\n, when\n\n    q=5\n, \n    s=2\n, \n    t=5\n, \n    \u2211\n    _i=1^qb_i +\n    \n    \u2211\n    _i=s^tb_i = 23 + 49 = 72\n. In the third test case, there\nis only one non-empty consecutive subsequence \n    [74]\n. When \n    q=1\n,\n\n    s=1\n, \n    t=1\n, \n    \u2211\n    _i=1^qb_i +\n    \n    \u2211\n    _i=s^tb_i = 148\n.\n\n",
        "cf_contest_id": 1787,
        "cf_index": "I",
        "cf_rating": 3400,
        "difficulty": 0,
        "cf_tags": [
            "data structures",
            "divide and conquer",
            "two pointers"
        ],
        "time_limit_seconds": 2.0,
        "memory_limit_bytes": 512.0,
        "public_cases": [
            [
                "4\r\n7\r\n80 59 100 -52 -86 -62 75\r\n8\r\n-48 -14 -26 43 -41 34 13 55\r\n1\r\n74\r\n20\r\n56 -60 62 13 88 -48 64 36 -10 19 94 25 -69 88 87 79 -70 74 -26 59\r\n",
                "5924\r\n2548\r\n148\r\n98887\r\n"
            ]
        ],
        "private_cases": []
    }
]